{% extends 'base.html' %}
{% load static %}
{% load horario_tags %}

{% block content %}
<link href='https://cdn.jsdelivr.net/npm/fullcalendar-bootstrap5@6.1.10/main.min.css' rel='stylesheet' />

{% if user.is_authenticated %}
<div class="container-fluid mt-4">
    <!-- Encabezado con información del estudiante -->
    <div class="row mb-4">
        <div class="col-12">
            <div class="card border-0 shadow-sm">
                <div class="card-body bg-gradient-dark text-white rounded">
                    <div class="d-flex align-items-center">
                        <div class="flex-shrink-0">
                            <i class="fas fa-user-graduate fa-3x me-3 text-warning"></i>
                        </div>
                        <div class="flex-grow-1">
                            <h2 class="mb-1 text-warning">{{ alumno.nombre }} {{ alumno.apellido_paterno }}</h2>
                            <p class="mb-0 text-white-75"><i class="fas fa-id-card me-2"></i>RUT: <span class="text-white">{{ alumno.rut }}</span></p>
                            <p class="mb-0 text-white-75"><i class="fas fa-envelope me-2"></i><span class="text-white">{{ alumno.correo }}</span></p>
                        </div>
                        <div class="flex-shrink-0">
                            <span class="badge bg-warning text-dark p-2">
                                <i class="fas fa-graduation-cap me-1"></i>
                                {{ curso }}
                            </span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Tarjetas de resumen -->
    <div class="row mb-4">
        <div class="col-md-3">
            <div class="card border-0 shadow-sm h-100">
                <div class="card-body text-center">
                    <i class="fas fa-chart-line fa-2x text-primary mb-2"></i>
                    <h5>Promedio General</h5>
                    <h2 class="text-primary">6.5</h2>
                    <small class="text-muted">Última actualización: Hoy</small>
                </div>
            </div>
        </div>
        <div class="col-md-3">
            <div class="card border-0 shadow-sm h-100">
                <div class="card-body text-center">
                    <i class="fas fa-calendar-check fa-2x text-success mb-2"></i>
                    <h5>Asistencia</h5>
                    <h2 class="text-success">95%</h2>
                    <small class="text-muted">Este mes</small>
                </div>
            </div>
        </div>
        <div class="col-md-3">
            <div class="card border-0 shadow-sm h-100">
                <div class="card-body text-center">
                    <i class="fas fa-tasks fa-2x text-warning mb-2"></i>
                    <h5>Tareas Pendientes</h5>
                    <h2 class="text-warning">3</h2>
                    <small class="text-muted">Para esta semana</small>
                </div>
            </div>
        </div>
        <div class="col-md-3">
            <div class="card border-0 shadow-sm h-100">
                <div class="card-body text-center">
                    <i class="fas fa-bell fa-2x text-danger mb-2"></i>
                    <h5>Notificaciones</h5>
                    <h2 class="text-danger">2</h2>
                    <small class="text-muted">Sin leer</small>
                </div>
            </div>
        </div>
    </div>

    <!-- Pestañas principales -->
    <ul class="nav nav-tabs mb-4" id="studentTabs" role="tablist">
        <li class="nav-item" role="presentation">
            <button class="nav-link active" id="asignaturas-tab" data-bs-toggle="tab" data-bs-target="#asignaturas" type="button">
                <i class="fas fa-book me-2"></i>Asignaturas
            </button>
        </li>
        <li class="nav-item" role="presentation">
            <button class="nav-link" id="horario-tab" data-bs-toggle="tab" data-bs-target="#horario" type="button">
                <i class="fas fa-clock me-2"></i>Mi Horario
            </button>
        </li>
        <li class="nav-item" role="presentation">
            <button class="nav-link" id="calificaciones-tab" data-bs-toggle="tab" data-bs-target="#calificaciones" type="button">
                <i class="fas fa-chart-bar me-2"></i>Calificaciones
            </button>
        </li>
        <li class="nav-item" role="presentation">
            <button class="nav-link" id="asistencia-tab" data-bs-toggle="tab" data-bs-target="#asistencia" type="button">
                <i class="fas fa-calendar-check me-2"></i>Asistencia
            </button>
        </li>
        <li class="nav-item" role="presentation">
            <button class="nav-link" id="calendario-tab" data-bs-toggle="tab" data-bs-target="#calendario" type="button">
                <i class="fas fa-calendar-alt me-2"></i>Calendario
            </button>
        </li>
        <li class="nav-item" role="presentation">
            <button class="nav-link" id="comunicacion-tab" data-bs-toggle="tab" data-bs-target="#comunicacion" type="button">
                <i class="fas fa-comments me-2"></i>Comunicación
            </button>
        </li>
        <li class="nav-item" role="presentation">
            <button class="nav-link" id="electivos-tab" data-bs-toggle="tab" data-bs-target="#electivos" type="button">
                <i class="fas fa-star me-2"></i>Electivos
            </button>
        </li>
    </ul>

    <!-- Contenido de las pestañas -->
    <div class="tab-content" id="studentTabsContent">
        <!-- Pestaña de Asignaturas -->
        <div class="tab-pane fade show active" id="asignaturas">
            <div class="row">
                {% for asignatura_inscrita in asignaturas_estudiante %}
                <div class="col-12 mb-3">
                    <div class="card h-100 border-0 shadow-sm asignatura-card">
                        <div class="card-body d-flex align-items-center">
                            <div class="asignatura-bar me-3" style="width: 6px; height: 48px; border-radius: 4px; background: linear-gradient(180deg, #4e73df, #224abe);"></div>
                            <div class="flex-grow-1">
                                <div class="d-flex flex-column flex-md-row align-items-md-center justify-content-between">
                                    <div>
                                        <h5 class="mb-1 fw-bold text-primary">{{ asignatura_inscrita.asignatura_impartida.asignatura.nombre }}</h5>
                                        <span class="badge bg-light text-primary border border-primary">{{ asignatura_inscrita.asignatura_impartida.codigo }}</span>
                                    </div>
                                    <div class="mt-2 mt-md-0 d-flex align-items-center">
                                        <span class="text-muted small me-3">
                                            Prof. {{ asignatura_inscrita.asignatura_impartida.docente.usuario.nombre }} {{ asignatura_inscrita.asignatura_impartida.docente.usuario.apellido_paterno }}
                                        </span>
                                        <button class="btn btn-primary btn-sm" onclick="entrarAsignatura('{{ asignatura_inscrita.asignatura_impartida.asignatura.nombre }}', '{{ asignatura_inscrita.asignatura_impartida.codigo }}')">
                                            <i class="fas fa-sign-in-alt me-1"></i>Entrar
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                {% endfor %}
            </div>
        </div>

        <!-- Pestaña de Horario -->
        <div class="tab-pane fade" id="horario">
            <div class="card border-0 shadow-sm">
                <div class="card-body">
                    <h5 class="card-title"><i class="fas fa-clock me-2 text-primary"></i>Mi Horario Semanal</h5>
                    <div class="table-responsive">
                        <table class="table table-bordered table-hover">
                            <thead class="table-primary">
                                <tr>
                                    <th style="width: 120px;">Horario</th>
                                    <th>Lunes</th>
                                    <th>Martes</th>
                                    <th>Miércoles</th>
                                    <th>Jueves</th>
                                    <th>Viernes</th>
                                </tr>
                            </thead>
                            <tbody>
                                <!-- Bloque 1: 08:00 - 08:45 -->
                                <tr>
                                    <td class="text-center fw-bold bg-light">08:00 - 08:45</td>
                                    {% for dia in "LUNES,MARTES,MIERCOLES,JUEVES,VIERNES"|split:"," %}
                                        <td class="text-center">
                                            {% if horario_estudiante|get_item:dia|get_item:"1" %}
                                                <div class="clase-item p-2 rounded">
                                                    <strong>{{ horario_estudiante|get_item:dia|get_item:"1"|get_item:"asignatura" }}</strong><br>
                                                    <small class="text-muted">{{ horario_estudiante|get_item:dia|get_item:"1"|get_item:"docente" }}</small><br>
                                                    <span class="badge bg-info">{{ horario_estudiante|get_item:dia|get_item:"1"|get_item:"sala" }}</span>
                                                </div>
                                            {% endif %}
                                        </td>
                                    {% endfor %}
                                </tr>
                                <!-- Bloque 2: 08:45 - 09:30 -->
                                <tr>
                                    <td class="text-center fw-bold bg-light">08:45 - 09:30</td>
                                    {% for dia in "LUNES,MARTES,MIERCOLES,JUEVES,VIERNES"|split:"," %}
                                        <td class="text-center">
                                            {% if horario_estudiante|get_item:dia|get_item:"2" %}
                                                <div class="clase-item p-2 rounded">
                                                    <strong>{{ horario_estudiante|get_item:dia|get_item:"2"|get_item:"asignatura" }}</strong><br>
                                                    <small class="text-muted">{{ horario_estudiante|get_item:dia|get_item:"2"|get_item:"docente" }}</small><br>
                                                    <span class="badge bg-info">{{ horario_estudiante|get_item:dia|get_item:"2"|get_item:"sala" }}</span>
                                                </div>
                                            {% endif %}
                                        </td>
                                    {% endfor %}
                                </tr>
                                <!-- Recreo 1: 09:30 - 09:45 -->
                                <tr class="table-warning">
                                    <td class="text-center fw-bold">09:30 - 09:45</td>
                                    <td colspan="5" class="text-center fw-bold">RECREO</td>
                                </tr>
                                <!-- Bloque 3: 09:45 - 10:30 -->
                                <tr>
                                    <td class="text-center fw-bold bg-light">09:45 - 10:30</td>
                                    {% for dia in "LUNES,MARTES,MIERCOLES,JUEVES,VIERNES"|split:"," %}
                                        <td class="text-center">
                                            {% if horario_estudiante|get_item:dia|get_item:"3" %}
                                                <div class="clase-item p-2 rounded">
                                                    <strong>{{ horario_estudiante|get_item:dia|get_item:"3"|get_item:"asignatura" }}</strong><br>
                                                    <small class="text-muted">{{ horario_estudiante|get_item:dia|get_item:"3"|get_item:"docente" }}</small><br>
                                                    <span class="badge bg-info">{{ horario_estudiante|get_item:dia|get_item:"3"|get_item:"sala" }}</span>
                                                </div>
                                            {% endif %}
                                        </td>
                                    {% endfor %}
                                </tr>
                                <!-- Bloque 4: 10:30 - 11:15 -->
                                <tr>
                                    <td class="text-center fw-bold bg-light">10:30 - 11:15</td>
                                    {% for dia in "LUNES,MARTES,MIERCOLES,JUEVES,VIERNES"|split:"," %}
                                        <td class="text-center">
                                            {% if horario_estudiante|get_item:dia|get_item:"4" %}
                                                <div class="clase-item p-2 rounded">
                                                    <strong>{{ horario_estudiante|get_item:dia|get_item:"4"|get_item:"asignatura" }}</strong><br>
                                                    <small class="text-muted">{{ horario_estudiante|get_item:dia|get_item:"4"|get_item:"docente" }}</small><br>
                                                    <span class="badge bg-info">{{ horario_estudiante|get_item:dia|get_item:"4"|get_item:"sala" }}</span>
                                                </div>
                                            {% endif %}
                                        </td>
                                    {% endfor %}
                                </tr>
                                <!-- Recreo 2: 11:15 - 11:30 -->
                                <tr class="table-warning">
                                    <td class="text-center fw-bold">11:15 - 11:30</td>
                                    <td colspan="5" class="text-center fw-bold">RECREO</td>
                                </tr>
                                <!-- Bloque 5: 11:30 - 12:15 -->
                                <tr>
                                    <td class="text-center fw-bold bg-light">11:30 - 12:15</td>
                                    {% for dia in "LUNES,MARTES,MIERCOLES,JUEVES,VIERNES"|split:"," %}
                                        <td class="text-center">
                                            {% if horario_estudiante|get_item:dia|get_item:"5" %}
                                                <div class="clase-item p-2 rounded">
                                                    <strong>{{ horario_estudiante|get_item:dia|get_item:"5"|get_item:"asignatura" }}</strong><br>
                                                    <small class="text-muted">{{ horario_estudiante|get_item:dia|get_item:"5"|get_item:"docente" }}</small><br>
                                                    <span class="badge bg-info">{{ horario_estudiante|get_item:dia|get_item:"5"|get_item:"sala" }}</span>
                                                </div>
                                            {% endif %}
                                        </td>
                                    {% endfor %}
                                </tr>
                                <!-- Bloque 6: 12:15 - 13:00 -->
                                <tr>
                                    <td class="text-center fw-bold bg-light">12:15 - 13:00</td>
                                    {% for dia in "LUNES,MARTES,MIERCOLES,JUEVES,VIERNES"|split:"," %}
                                        <td class="text-center">
                                            {% if horario_estudiante|get_item:dia|get_item:"6" %}
                                                <div class="clase-item p-2 rounded">
                                                    <strong>{{ horario_estudiante|get_item:dia|get_item:"6"|get_item:"asignatura" }}</strong><br>
                                                    <small class="text-muted">{{ horario_estudiante|get_item:dia|get_item:"6"|get_item:"docente" }}</small><br>
                                                    <span class="badge bg-info">{{ horario_estudiante|get_item:dia|get_item:"6"|get_item:"sala" }}</span>
                                                </div>
                                            {% endif %}
                                        </td>
                                    {% endfor %}
                                </tr>
                                <!-- Almuerzo: 13:00 - 13:45 -->
                                <tr class="table-success">
                                    <td class="text-center fw-bold">13:00 - 13:45</td>
                                    <td colspan="5" class="text-center fw-bold">ALMUERZO</td>
                                </tr>
                                <!-- Bloque 7: 13:45 - 14:30 -->
                                <tr>
                                    <td class="text-center fw-bold bg-light">13:45 - 14:30</td>
                                    {% for dia in "LUNES,MARTES,MIERCOLES,JUEVES"|split:"," %}
                                        <td class="text-center">
                                            {% if horario_estudiante|get_item:dia|get_item:"7" %}
                                                <div class="clase-item p-2 rounded">
                                                    <strong>{{ horario_estudiante|get_item:dia|get_item:"7"|get_item:"asignatura" }}</strong><br>
                                                    <small class="text-muted">{{ horario_estudiante|get_item:dia|get_item:"7"|get_item:"docente" }}</small><br>
                                                    <span class="badge bg-info">{{ horario_estudiante|get_item:dia|get_item:"7"|get_item:"sala" }}</span>
                                                </div>
                                            {% endif %}
                                        </td>
                                    {% endfor %}
                                    <td class="text-center text-muted">-</td>
                                </tr>
                                <!-- Bloque 8: 14:30 - 15:15 -->
                                <tr>
                                    <td class="text-center fw-bold bg-light">14:30 - 15:15</td>
                                    {% for dia in "LUNES,MARTES,MIERCOLES,JUEVES"|split:"," %}
                                        <td class="text-center">
                                            {% if horario_estudiante|get_item:dia|get_item:"8" %}
                                                <div class="clase-item p-2 rounded">
                                                    <strong>{{ horario_estudiante|get_item:dia|get_item:"8"|get_item:"asignatura" }}</strong><br>
                                                    <small class="text-muted">{{ horario_estudiante|get_item:dia|get_item:"8"|get_item:"docente" }}</small><br>
                                                    <span class="badge bg-info">{{ horario_estudiante|get_item:dia|get_item:"8"|get_item:"sala" }}</span>
                                                </div>
                                            {% endif %}
                                        </td>
                                    {% endfor %}
                                    <td class="text-center text-muted">-</td>
                                </tr>
                                <!-- Bloque 9: 15:15 - 16:00 -->
                                <tr>
                                    <td class="text-center fw-bold bg-light">15:15 - 16:00</td>
                                    {% for dia in "LUNES,MARTES,MIERCOLES,JUEVES"|split:"," %}
                                        <td class="text-center">
                                            {% if horario_estudiante|get_item:dia|get_item:"9" %}
                                                <div class="clase-item p-2 rounded">
                                                    <strong>{{ horario_estudiante|get_item:dia|get_item:"9"|get_item:"asignatura" }}</strong><br>
                                                    <small class="text-muted">{{ horario_estudiante|get_item:dia|get_item:"9"|get_item:"docente" }}</small><br>
                                                    <span class="badge bg-info">{{ horario_estudiante|get_item:dia|get_item:"9"|get_item:"sala" }}</span>
                                                </div>
                                            {% endif %}
                                        </td>
                                    {% endfor %}
                                    <td class="text-center text-muted">-</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>

        <!-- Pestaña de Calificaciones -->
        <div class="tab-pane fade" id="calificaciones">
            <div class="accordion" id="accordionCalificaciones">
                {% for asignatura_inscrita in asignaturas_estudiante %}
                    <div class="accordion-item">
                        <h2 class="accordion-header" id="heading-{{ forloop.counter }}">
                            <button class="accordion-button {% if not forloop.first %}collapsed{% endif %}" type="button" data-bs-toggle="collapse" data-bs-target="#collapse-{{ forloop.counter }}" aria-expanded="{% if forloop.first %}true{% else %}false{% endif %}" aria-controls="collapse-{{ forloop.counter }}">
                                <i class="fas fa-book me-2 text-primary"></i>
                                <strong>{{ asignatura_inscrita.asignatura_impartida.asignatura.nombre }}</strong>
                            </button>
                        </h2>
                        <div id="collapse-{{ forloop.counter }}" class="accordion-collapse collapse {% if forloop.first %}show{% endif %}" aria-labelledby="heading-{{ forloop.counter }}" data-bs-parent="#accordionCalificaciones">
                            <div class="accordion-body">
                                <div class="table-responsive">
                                    <table class="table table-hover table-striped">
                                        <thead>
                                            <tr>
                                                <th>Evaluación</th>
                                                <th>Fecha</th>
                                                <th>Nota</th>
                                                <th>Estado</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr>
                                                <td>Prueba N°1</td>
                                                <td>15/04/2024</td>
                                                <td>
                                                    <span class="badge bg-success fs-6">6.5</span>
                                                </td>
                                                <td>
                                                    <span class="text-success fw-bold">Aprobado</span>
                                                </td>
                                            </tr>
                                            <tr>
                                                <td>Prueba N°2</td>
                                                <td>10/05/2024</td>
                                                <td>
                                                    <span class="badge bg-danger fs-6">3.2</span>
                                                </td>
                                                <td>
                                                    <span class="text-danger fw-bold">Reprobado</span>
                                                </td>
                                            </tr>
                                             <tr>
                                                <td>Trabajo Práctico</td>
                                                <td>25/05/2024</td>
                                                <td>
                                                    <span class="badge bg-success fs-6">7.0</span>
                                                </td>
                                                <td>
                                                    <span class="text-success fw-bold">Aprobado</span>
                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                {% empty %}
                     <div class="alert alert-info mt-4" role="alert">
                        <i class="fas fa-info-circle me-2"></i>
                        Aún no tienes asignaturas inscritas.
                    </div>
                {% endfor %}
            </div>
        </div>

        <!-- Pestaña de Asistencia -->
        <div class="tab-pane fade" id="asistencia">
            <div class="row">
                <!-- Asistencia por Asignatura -->
                <div class="col-12 mb-4">
                    <div class="card border-0 shadow-sm">
                        <div class="card-header bg-warning text-dark">
                            <h5 class="card-title mb-0">
                                <i class="fas fa-calendar-check me-2"></i>Asistencia por Asignatura
                            </h5>
                        </div>
                        <div class="card-body">
                            <div class="row">
                                {% for asignatura_inscrita in asignaturas_estudiante %}
                                <div class="col-md-6 col-lg-4 mb-3">
                                    <div class="card h-100 border-0 shadow-sm">
                                        <div class="card-body">
                                            <h6 class="card-title text-primary">
                                                <i class="fas fa-book me-2"></i>
                                                {{ asignatura_inscrita.asignatura_impartida.asignatura.nombre }}
                                            </h6>
                                            <div class="d-flex justify-content-between align-items-center mb-2">
                                                <span class="text-muted small">Asistencia</span>
                                                <span class="fw-bold text-success">95%</span>
                                            </div>
                                            <div class="progress mb-2" style="height: 8px;">
                                                <div class="progress-bar bg-success" style="width: 95%"></div>
                                            </div>
                                            <div class="d-flex justify-content-between small text-muted">
                                                <span>Presente: 19</span>
                                                <span>Ausente: 1</span>
                                            </div>
                                            <div class="mt-2">
                                                <small class="text-muted">Última clase: Ayer</small>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                {% empty %}
                                <div class="col-12 text-center text-muted py-4">
                                    <i class="fas fa-calendar-check fa-3x mb-3"></i>
                                    <p>No tienes asignaturas inscritas para mostrar asistencia</p>
                                </div>
                                {% endfor %}
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Registro de Asistencia -->
                <div class="col-md-8">
                    <div class="card border-0 shadow-sm mb-4">
                        <div class="card-body">
                            <h5 class="card-title">Registro de Asistencia</h5>
                            <div class="table-responsive">
                                <table class="table">
                                    <thead>
                                        <tr>
                                            <th>Fecha</th>
                                            <th>Asignatura</th>
                                            <th>Estado</th>
                                            <th>Justificación</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td>18/03/2024</td>
                                            <td>Matemáticas</td>
                                            <td><span class="badge bg-success">Presente</span></td>
                                            <td>-</td>
                                        </tr>
                                        <tr>
                                            <td>17/03/2024</td>
                                            <td>Lenguaje</td>
                                            <td><span class="badge bg-danger">Ausente</span></td>
                                            <td>Médico</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="card border-0 shadow-sm">
                        <div class="card-body">
                            <h5 class="card-title">Estadísticas</h5>
                            <canvas id="asistenciaChart" height="200"></canvas>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Pestaña de Calendario con Calendario Estático Bootstrap -->
        <div class="tab-pane fade" id="calendario">
            <div class="row">
                <!-- Columna del Calendario -->
                <div class="col-lg-9">
                    <div class="card border-0 shadow-sm">
                        <div class="card-header bg-light">
                            <div class="d-flex justify-content-between align-items-center">
                                <h5 class="mb-0">
                                    <i class="fas fa-calendar-alt text-primary me-2"></i>
                                    <strong>Junio 2024</strong>
                                </h5>
                                <div class="btn-group">
                                    <button class="btn btn-outline-secondary btn-sm"><i class="fas fa-chevron-left"></i></button>
                                    <button class="btn btn-outline-secondary btn-sm"><i class="fas fa-chevron-right"></i></button>
                                </div>
                            </div>
                        </div>
                        <div class="card-body p-2">
                            <table class="table table-bordered calendar-table">
                                <thead class="text-center">
                                    <tr>
                                        <th>Lun</th><th>Mar</th><th>Mié</th><th>Jue</th><th>Vie</th><th>Sáb</th><th>Dom</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td class="text-muted">27</td><td class="text-muted">28</td><td class="text-muted">29</td><td class="text-muted">30</td><td class="text-muted">31</td><td>1</td><td>2</td>
                                    </tr>
                                    <tr>
                                        <td>3</td><td>4</td><td>5<div class="calendar-event bg-success">Prueba</div></td><td>6</td><td>7</td><td>8</td><td>9</td>
                                    </tr>
                                    <tr>
                                        <td>10</td><td>11</td><td>12</td><td>13</td><td>14<div class="calendar-event bg-info text-dark">Día del Alumno</div></td><td>15</td><td>16</td>
                                    </tr>
                                    <tr>
                                        <td>17</td><td>18</td><td>19</td><td class="today">20</td><td>21</td><td>22</td><td>23</td>
                                    </tr>
                                    <tr>
                                        <td>24</td><td>25</td><td>26<div class="calendar-event bg-warning text-dark">Entrega Informe</div></td><td>27</td><td>28</td><td>29</td><td>30</td>
                                    </tr>
                                    <tr>
                                        <td class="text-muted">1</td><td class="text-muted">2</td><td class="text-muted">3</td><td class="text-muted">4</td><td class="text-muted">5</td><td class="text-muted">6</td><td class="text-muted">7</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
                <!-- Columna de Información Adicional -->
                <div class="col-lg-3">
                    <div class="card border-0 shadow-sm mb-4">
                        <div class="card-body">
                            <h5 class="card-title mb-3"><i class="fas fa-star me-2 text-warning"></i>Próximos Eventos</h5>
                            <div class="list-group list-group-flush">
                                <a href="#" class="list-group-item list-group-item-action px-0">
                                    <div class="d-flex w-100 justify-content-between">
                                        <h6 class="mb-1">Prueba</h6>
                                        <small class="text-muted">05/06</small>
                                    </div>
                                    <small class="badge bg-success-soft text-success">Evaluación</small>
                                </a>
                                <a href="#" class="list-group-item list-group-item-action px-0">
                                    <div class="d-flex w-100 justify-content-between">
                                        <h6 class="mb-1">Día del Alumno</h6>
                                        <small class="text-muted">14/06</small>
                                    </div>
                                    <small class="badge bg-info-soft text-info">Evento</small>
                                </a>
                                <a href="#" class="list-group-item list-group-item-action px-0">
                                    <div class="d-flex w-100 justify-content-between">
                                        <h6 class="mb-1">Entrega Informe</h6>
                                        <small class="text-muted">26/06</small>
                                    </div>
                                    <small class="badge bg-warning-soft text-warning">Tarea</small>
                                </a>
                            </div>
                        </div>
                    </div>
                    <div class="card border-0 shadow-sm">
                        <div class="card-body">
                            <h5 class="card-title mb-3"><i class="fas fa-tags me-2 text-primary"></i>Leyenda</h5>
                            <div class="d-flex flex-column gap-2">
                                <div class="d-flex align-items-center"><div class="legend-dot bg-success"></div>Evaluaciones</div>
                                <div class="d-flex align-items-center"><div class="legend-dot bg-warning"></div>Tareas y Entregas</div>
                                <div class="d-flex align-items-center"><div class="legend-dot bg-info"></div>Eventos</div>
                                <div class="d-flex align-items-center"><div class="legend-dot bg-danger"></div>Avisos Importantes</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Pestaña de Comunicación -->
        <div class="tab-pane fade" id="comunicacion">
            <div class="row">
                <!-- Chats por Asignatura -->
                <div class="col-md-4">
                    <div class="card border-0 shadow-sm mb-3">
                        <div class="card-header bg-primary text-white">
                            <h5 class="card-title mb-0">
                                <i class="fas fa-comments me-2"></i>Chats por Asignatura
                            </h5>
                        </div>
                        <div class="card-body">
                            <div class="list-group list-group-flush">
                                {% for asignatura_inscrita in asignaturas_estudiante %}
                                <a href="#" class="list-group-item list-group-item-action">
                                    <div class="d-flex align-items-center">
                                        <div class="flex-shrink-0">
                                            <i class="fas fa-comments text-primary"></i>
                                        </div>
                                        <div class="flex-grow-1 ms-3">
                                            <h6 class="mb-0">{{ asignatura_inscrita.asignatura_impartida.asignatura.nombre }}</h6>
                                            <small class="text-muted">
                                                Prof. {{ asignatura_inscrita.asignatura_impartida.docente.usuario.nombre }} {{ asignatura_inscrita.asignatura_impartida.docente.usuario.apellido_paterno }}
                                            </small>
                                            <br>
                                            <small class="text-success">Último mensaje: hace 5 min</small>
                                        </div>
                                        <div class="flex-shrink-0">
                                            <span class="badge bg-danger rounded-pill">2</span>
                                        </div>
                                    </div>
                                </a>
                                {% empty %}
                                <div class="text-center text-muted py-3">
                                    <i class="fas fa-comments fa-2x mb-2"></i>
                                    <p>No tienes asignaturas inscritas</p>
                                </div>
                                {% endfor %}
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Foros por Asignatura -->
                <div class="col-md-4">
                    <div class="card border-0 shadow-sm mb-3">
                        <div class="card-header bg-success text-white">
                            <h5 class="card-title mb-0">
                                <i class="fas fa-users me-2"></i>Foros por Asignatura
                            </h5>
                        </div>
                        <div class="card-body">
                            <div class="list-group list-group-flush">
                                {% for asignatura_inscrita in asignaturas_estudiante %}
                                <a href="#" class="list-group-item list-group-item-action">
                                    <div class="d-flex align-items-center">
                                        <div class="flex-shrink-0">
                                            <i class="fas fa-users text-success"></i>
                                        </div>
                                        <div class="flex-grow-1 ms-3">
                                            <h6 class="mb-0">{{ asignatura_inscrita.asignatura_impartida.asignatura.nombre }}</h6>
                                            <small class="text-muted">
                                                {{ asignatura_inscrita.asignatura_impartida.codigo }}
                                            </small>
                                            <br>
                                            <small class="text-info">3 temas activos • 12 respuestas</small>
                                        </div>
                                        <div class="flex-shrink-0">
                                            <span class="badge bg-warning text-dark">Nuevo</span>
                                        </div>
                                    </div>
                                </a>
                                {% empty %}
                                <div class="text-center text-muted py-3">
                                    <i class="fas fa-users fa-2x mb-2"></i>
                                    <p>No tienes asignaturas inscritas</p>
                                </div>
                                {% endfor %}
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Comunidad Escolar -->
                <div class="col-md-4">
                    <div class="card border-0 shadow-sm mb-3">
                        <div class="card-header bg-info text-white">
                            <h5 class="card-title mb-0">
                                <i class="fas fa-school me-2"></i>Comunidad Escolar
                            </h5>
                        </div>
                        <div class="card-body">
                            <div class="list-group list-group-flush">
                                <a href="#" class="list-group-item list-group-item-action">
                                    <div class="d-flex align-items-center">
                                        <div class="flex-shrink-0">
                                            <i class="fas fa-bullhorn text-info"></i>
                                        </div>
                                        <div class="flex-grow-1 ms-3">
                                            <h6 class="mb-0">Anuncios Generales</h6>
                                            <small class="text-muted">Comunicaciones oficiales</small>
                                            <br>
                                            <small class="text-info">5 anuncios nuevos</small>
                                        </div>
                                        <div class="flex-shrink-0">
                                            <span class="badge bg-danger rounded-pill">5</span>
                                        </div>
                                    </div>
                                </a>
                                <a href="#" class="list-group-item list-group-item-action">
                                    <div class="d-flex align-items-center">
                                        <div class="flex-shrink-0">
                                            <i class="fas fa-calendar-alt text-info"></i>
                                        </div>
                                        <div class="flex-grow-1 ms-3">
                                            <h6 class="mb-0">Eventos Escolares</h6>
                                            <small class="text-muted">Actividades y celebraciones</small>
                                            <br>
                                            <small class="text-info">Próximo: Día del Alumno</small>
                                        </div>
                                        <div class="flex-shrink-0">
                                            <span class="badge bg-success">Evento</span>
                                        </div>
                                    </div>
                                </a>
                                <a href="#" class="list-group-item list-group-item-action">
                                    <div class="d-flex align-items-center">
                                        <div class="flex-shrink-0">
                                            <i class="fas fa-question-circle text-info"></i>
                                        </div>
                                        <div class="flex-grow-1 ms-3">
                                            <h6 class="mb-0">Dudas Generales</h6>
                                            <small class="text-muted">Consultas sobre el colegio</small>
                                            <br>
                                            <small class="text-info">8 temas activos</small>
                                        </div>
                                        <div class="flex-shrink-0">
                                            <span class="badge bg-primary">Popular</span>
                                        </div>
                                    </div>
                                </a>
                                <a href="#" class="list-group-item list-group-item-action">
                                    <div class="d-flex align-items-center">
                                        <div class="flex-shrink-0">
                                            <i class="fas fa-handshake text-info"></i>
                                        </div>
                                        <div class="flex-grow-1 ms-3">
                                            <h6 class="mb-0">Centro de Estudiantes</h6>
                                            <small class="text-muted">Representación estudiantil</small>
                                            <br>
                                            <small class="text-info">2 propuestas activas</small>
                                        </div>
                                        <div class="flex-shrink-0">
                                            <span class="badge bg-warning text-dark">Votación</span>
                                        </div>
                                    </div>
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Pestaña de Electivos -->
        <div class="tab-pane fade" id="electivos">
            <div class="row">
                <!-- Electivos Disponibles -->
                <div class="col-lg-8">
                    <div class="card border-0 shadow-sm mb-4">
                        <div class="card-header bg-warning text-dark">
                            <h5 class="card-title mb-0">
                                <i class="fas fa-star me-2"></i>Electivos Disponibles
                            </h5>
                        </div>
                        <div class="card-body">
                            <div class="row">
                                <!-- Electivo 1 -->
                                <div class="col-md-6 mb-3">
                                    <div class="card h-100 border-0 shadow-sm hover-card">
                                        <div class="card-body">
                                            <div class="d-flex justify-content-between align-items-start mb-2">
                                                <h6 class="card-title text-primary mb-0">Programación Web</h6>
                                                <span class="badge bg-success">Disponible</span>
                                            </div>
                                            <p class="card-text text-muted small">Desarrollo de aplicaciones web modernas</p>
                                            <div class="mb-2">
                                                <small class="text-muted">
                                                    <i class="fas fa-user me-1"></i>Prof. María González
                                                </small>
                                            </div>
                                            <div class="mb-2">
                                                <small class="text-muted">
                                                    <i class="fas fa-clock me-1"></i>Martes y Jueves 14:30-16:00
                                                </small>
                                            </div>
                                            <div class="mb-2">
                                                <small class="text-muted">
                                                    <i class="fas fa-users me-1"></i>15/25 cupos disponibles
                                                </small>
                                            </div>
                                            <button class="btn btn-primary btn-sm w-100">
                                                <i class="fas fa-plus me-1"></i>Inscribirse
                                            </button>
                                        </div>
                                    </div>
                                </div>

                                <!-- Electivo 2 -->
                                <div class="col-md-6 mb-3">
                                    <div class="card h-100 border-0 shadow-sm hover-card">
                                        <div class="card-body">
                                            <div class="d-flex justify-content-between align-items-start mb-2">
                                                <h6 class="card-title text-primary mb-0">Arte Digital</h6>
                                                <span class="badge bg-success">Disponible</span>
                                            </div>
                                            <p class="card-text text-muted small">Creación artística con herramientas digitales</p>
                                            <div class="mb-2">
                                                <small class="text-muted">
                                                    <i class="fas fa-user me-1"></i>Prof. Carlos Ruiz
                                                </small>
                                            </div>
                                            <div class="mb-2">
                                                <small class="text-muted">
                                                    <i class="fas fa-clock me-1"></i>Lunes y Miércoles 16:00-17:30
                                                </small>
                                            </div>
                                            <div class="mb-2">
                                                <small class="text-muted">
                                                    <i class="fas fa-users me-1"></i>8/20 cupos disponibles
                                                </small>
                                            </div>
                                            <button class="btn btn-primary btn-sm w-100">
                                                <i class="fas fa-plus me-1"></i>Inscribirse
                                            </button>
                                        </div>
                                    </div>
                                </div>

                                <!-- Electivo 3 -->
                                <div class="col-md-6 mb-3">
                                    <div class="card h-100 border-0 shadow-sm hover-card">
                                        <div class="card-body">
                                            <div class="d-flex justify-content-between align-items-start mb-2">
                                                <h6 class="card-title text-primary mb-0">Robótica</h6>
                                                <span class="badge bg-warning text-dark">Próximamente</span>
                                            </div>
                                            <p class="card-text text-muted small">Construcción y programación de robots</p>
                                            <div class="mb-2">
                                                <small class="text-muted">
                                                    <i class="fas fa-user me-1"></i>Prof. Ana Silva
                                                </small>
                                            </div>
                                            <div class="mb-2">
                                                <small class="text-muted">
                                                    <i class="fas fa-clock me-1"></i>Viernes 13:00-15:30
                                                </small>
                                            </div>
                                            <div class="mb-2">
                                                <small class="text-muted">
                                                    <i class="fas fa-users me-1"></i>20 cupos disponibles
                                                </small>
                                            </div>
                                            <button class="btn btn-secondary btn-sm w-100" disabled>
                                                <i class="fas fa-clock me-1"></i>Próximamente
                                            </button>
                                        </div>
                                    </div>
                                </div>

                                <!-- Electivo 4 -->
                                <div class="col-md-6 mb-3">
                                    <div class="card h-100 border-0 shadow-sm hover-card">
                                        <div class="card-body">
                                            <div class="d-flex justify-content-between align-items-start mb-2">
                                                <h6 class="card-title text-primary mb-0">Fotografía</h6>
                                                <span class="badge bg-danger">Completo</span>
                                            </div>
                                            <p class="card-text text-muted small">Técnicas de fotografía y edición</p>
                                            <div class="mb-2">
                                                <small class="text-muted">
                                                    <i class="fas fa-user me-1"></i>Prof. Roberto Díaz
                                                </small>
                                            </div>
                                            <div class="mb-2">
                                                <small class="text-muted">
                                                    <i class="fas fa-clock me-1"></i>Jueves 15:00-17:00
                                                </small>
                                            </div>
                                            <div class="mb-2">
                                                <small class="text-muted">
                                                    <i class="fas fa-users me-1"></i>0/15 cupos disponibles
                                                </small>
                                            </div>
                                            <button class="btn btn-danger btn-sm w-100" disabled>
                                                <i class="fas fa-times me-1"></i>Completo
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Panel Lateral -->
                <div class="col-lg-4">
                    <!-- Mis Electivos Inscritos -->
                    <div class="card border-0 shadow-sm mb-4">
                        <div class="card-header bg-success text-white">
                            <h5 class="card-title mb-0">
                                <i class="fas fa-check-circle me-2"></i>Mis Electivos
                            </h5>
                        </div>
                        <div class="card-body">
                            <div class="list-group list-group-flush">
                                <div class="list-group-item d-flex justify-content-between align-items-center">
                                    <div>
                                        <h6 class="mb-1">Programación Web</h6>
                                        <small class="text-muted">Prof. María González</small>
                                    </div>
                                    <span class="badge bg-success">Activo</span>
                                </div>
                                <div class="list-group-item d-flex justify-content-between align-items-center">
                                    <div>
                                        <h6 class="mb-1">Arte Digital</h6>
                                        <small class="text-muted">Prof. Carlos Ruiz</small>
                                    </div>
                                    <span class="badge bg-success">Activo</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Información Importante -->
                    <div class="card border-0 shadow-sm">
                        <div class="card-header bg-info text-white">
                            <h5 class="card-title mb-0">
                                <i class="fas fa-info-circle me-2"></i>Información
                            </h5>
                        </div>
                        <div class="card-body">
                            <div class="alert alert-warning" role="alert">
                                <i class="fas fa-exclamation-triangle me-2"></i>
                                <strong>Período de Inscripción:</strong><br>
                                Hasta el 30 de junio
                            </div>
                            <div class="alert alert-info" role="alert">
                                <i class="fas fa-lightbulb me-2"></i>
                                <strong>Recomendación:</strong><br>
                                Puedes inscribirte en máximo 2 electivos
                            </div>
                            <div class="text-center">
                                <button class="btn btn-outline-primary btn-sm">
                                    <i class="fas fa-download me-1"></i>Descargar Horarios
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Estilos personalizados -->
<style>
    .bg-gradient-dark {
        background: linear-gradient(45deg, #2c3e50, #1a252f);
    }
    .text-white-75 {
        color: rgba(255, 255, 255, 0.75);
    }
    .hover-card {
        transition: transform 0.2s ease-in-out;
    }
    .hover-card:hover {
        transform: translateY(-5px);
    }
    .nav-tabs .nav-link {
        color: #6c757d;
    }
    .nav-tabs .nav-link.active {
        color: #4e73df;
        font-weight: 600;
    }
    .progress {
        background-color: #e9ecef;
    }
    .asignatura-card {
        transition: box-shadow 0.2s;
        border-left: 6px solid #4e73df;
        background: #fff;
    }
    .asignatura-card:hover {
        box-shadow: 0 4px 16px rgba(78, 115, 223, 0.15);
        border-left: 6px solid #224abe;
    }
    .asignatura-bar {
        background: linear-gradient(180deg, #4e73df, #224abe);
    }
    
    /* Estilos para el horario */
    .clase-item {
        background: linear-gradient(135deg, #4e73df, #224abe);
        color: white;
        border-radius: 8px;
        margin: 2px;
        transition: all 0.3s ease;
        min-height: 60px;
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
    }
    
    .clase-item:hover {
        transform: scale(1.05);
        box-shadow: 0 4px 12px rgba(78, 115, 223, 0.3);
    }
    
    .clase-item strong {
        font-size: 0.85rem;
        line-height: 1.2;
    }
    
    .clase-item small {
        font-size: 0.7rem;
        opacity: 0.9;
    }
    
    .clase-item .badge {
        font-size: 0.6rem;
        margin-top: 2px;
    }
    
    .table-hover tbody tr:hover {
        background-color: rgba(78, 115, 223, 0.05);
    }
    
    .table-primary th {
        background-color: #4e73df !important;
        color: white;
        border-color: #224abe;
    }
    
    .table-warning {
        background-color: #fff3cd !important;
    }
    
    .table-success {
        background-color: #d1edff !important;
    }
    
    .table-bordered td, .table-bordered th {
        border-color: #dee2e6;
        vertical-align: middle;
    }
    
    /* Estilos para el calendario estático */
    .calendar-table { table-layout: fixed; border-color: #f0f2f5; }
    .calendar-table th { font-weight: 500; color: #6c757d; border-bottom: 2px solid #e9ecef; }
    .calendar-table td {
        height: 100px; vertical-align: top; padding: 6px; font-weight: 500; transition: background-color 0.2s ease; border-color: #f0f2f5;
    }
    .calendar-table td:hover { background-color: #f8f9fa; }
    .calendar-table .today {
        background-color: #e9f0ff; font-weight: 700; color: #4e73df;
    }
    .calendar-event {
        font-size: 0.7rem; padding: 3px 6px; border-radius: 4px; margin-top: 4px; color: white; font-weight: 500; display: block; overflow: hidden; text-overflow: ellipsis; white-space: nowrap;
    }
    .legend-dot { width: 12px; height: 12px; border-radius: 50%; margin-right: 10px; }
    .bg-success-soft { background-color: rgba(40, 167, 69, 0.1); }
    .text-success { color: #1e7e34 !important; }
    .bg-info-soft { background-color: rgba(23, 162, 184, 0.1); }
    .text-info { color: #0c8599 !important; }
    .bg-warning-soft { background-color: rgba(255, 193, 7, 0.1); }
    .text-warning { color: #b98500 !important; }
</style>

<!-- Scripts para el prototipo -->
<script src="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.10/index.global.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.10/locales/es.global.min.js"></script>

<script>
document.addEventListener('DOMContentLoaded', function() {
    // Simulación de gráfico de asistencia
    const ctx = document.getElementById('asistenciaChart');
    if (ctx) {
        new Chart(ctx.getContext('2d'), {
            type: 'doughnut',
            data: {
                labels: ['Presente', 'Ausente', 'Justificado'],
                datasets: [{
                    data: [85, 10, 5],
                    backgroundColor: ['#28a745', '#dc3545', '#ffc107']
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false
            }
        });
    }
});

// Función para entrar a la asignatura
function entrarAsignatura(nombreAsignatura, codigoAsignatura) {
    // Crear el modal dinámicamente
    const modalHtml = `
        <div class="modal fade" id="modalEntrarAsignatura" tabindex="-1" aria-labelledby="modalEntrarAsignaturaLabel" aria-hidden="true">
            <div class="modal-dialog modal-lg">
                <div class="modal-content">
                    <div class="modal-header bg-primary text-white">
                        <h5 class="modal-title" id="modalEntrarAsignaturaLabel">
                            <i class="fas fa-book me-2"></i>${nombreAsignatura}
                        </h5>
                        <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body">
                        <div class="row mb-4">
                            <div class="col-12 text-center">
                                <h4 class="text-primary mb-3">¿A qué sección quieres acceder?</h4>
                                <p class="text-muted">Selecciona la opción que deseas explorar en ${nombreAsignatura}</p>
                            </div>
                        </div>
                        
                        <div class="row g-3">
                            <div class="col-md-4">
                                <div class="card h-100 border-0 shadow-sm hover-card" onclick="navegarSeccion('contenidos')">
                                    <div class="card-body text-center">
                                        <i class="fas fa-file-alt fa-3x text-primary mb-3"></i>
                                        <h5 class="card-title">Contenidos</h5>
                                        <p class="card-text text-muted">Material de estudio, apuntes y recursos</p>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="card h-100 border-0 shadow-sm hover-card" onclick="navegarSeccion('evaluaciones')">
                                    <div class="card-body text-center">
                                        <i class="fas fa-tasks fa-3x text-warning mb-3"></i>
                                        <h5 class="card-title">Evaluaciones</h5>
                                        <p class="card-text text-muted">Pruebas, trabajos y calificaciones</p>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="card h-100 border-0 shadow-sm hover-card" onclick="navegarSeccion('chat')">
                                    <div class="card-body text-center">
                                        <i class="fas fa-comments fa-3x text-success mb-3"></i>
                                        <h5 class="card-title">Chat</h5>
                                        <p class="card-text text-muted">Comunicación directa con el profesor</p>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="card h-100 border-0 shadow-sm hover-card" onclick="navegarSeccion('foro')">
                                    <div class="card-body text-center">
                                        <i class="fas fa-users fa-3x text-info mb-3"></i>
                                        <h5 class="card-title">Foro</h5>
                                        <p class="card-text text-muted">Discusiones y consultas con compañeros</p>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="card h-100 border-0 shadow-sm hover-card" onclick="navegarSeccion('asistencia')">
                                    <div class="card-body text-center">
                                        <i class="fas fa-calendar-check fa-3x text-danger mb-3"></i>
                                        <h5 class="card-title">Asistencia</h5>
                                        <p class="card-text text-muted">Control de asistencia y justificaciones</p>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="card h-100 border-0 shadow-sm hover-card" onclick="navegarSeccion('horario')">
                                    <div class="card-body text-center">
                                        <i class="fas fa-clock fa-3x text-secondary mb-3"></i>
                                        <h5 class="card-title">Horario</h5>
                                        <p class="card-text text-muted">Horarios de clases y actividades</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="row mt-4">
                            <div class="col-12">
                                <div class="alert alert-info" role="alert">
                                    <i class="fas fa-info-circle me-2"></i>
                                    <strong>Información rápida:</strong> ${nombreAsignatura} (${codigoAsignatura}) - Prof. Juan Pérez
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
                        <button type="button" class="btn btn-primary" onclick="navegarSeccion('general')">
                            <i class="fas fa-home me-1"></i>Página Principal
                        </button>
                    </div>
                </div>
            </div>
        </div>
    `;
    
    // Remover modal anterior si existe
    const modalAnterior = document.getElementById('modalEntrarAsignatura');
    if (modalAnterior) {
        modalAnterior.remove();
    }
    
    // Agregar el nuevo modal al body
    document.body.insertAdjacentHTML('beforeend', modalHtml);
    
    // Mostrar el modal
    const modal = new bootstrap.Modal(document.getElementById('modalEntrarAsignatura'));
    modal.show();
}

// Función para navegar a diferentes secciones
function navegarSeccion(seccion) {
    // Aquí puedes implementar la navegación real
    console.log('Navegando a sección:', seccion);
    
    // Por ahora, mostrar un mensaje
    alert(`Navegando a la sección: ${seccion}`);
    
    // Cerrar el modal
    const modal = bootstrap.Modal.getInstance(document.getElementById('modalEntrarAsignatura'));
    if (modal) {
        modal.hide();
    }
}
</script>

{% else %}
<div class="alert alert-danger mt-4" role="alert">
    <i class="fas fa-exclamation-circle me-2"></i>
    Debes iniciar sesión para acceder a este panel.
</div>
{% endif %}
{% endblock %}
